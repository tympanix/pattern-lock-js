"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){var t=Function("return this")()||(0,eval)("this");"function"==typeof define&&define.amd?define(["jquery"],function(n){return e(n,t)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery"),t):t.PatternLock=e(t.jQuery,t)}(function(e,t){var n,r="http://www.w3.org/2000/svg",o="touchmove mousemove",u=(_defineProperty(n={37:!0,38:!0,39:!0,40:!0,32:!0},"38",!0),_defineProperty(n,34,!0),_defineProperty(n,35,!0),_defineProperty(n,36,!0),n);function i(){navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&t.navigator.vibrate(25)}function c(n,a){var s=e(n),f=this,l=s[0],v=s.find(".lock-dots circle"),d=s.find(".lock-lines"),m=s.find(".lock-actives"),y=l.createSVGPoint(),b=[],p=[],g=void 0,h=void 0,x=0;for(x=0;x<v.length;x++)p[x+1]={x:v[x].cx.baseVal.value,y:v[x].cy.baseVal.value};function A(){s.removeClass("error"),s.addClass("success")}function w(){s.removeClass("success"),s.addClass("error")}function P(){return parseInt(b.map(function(e){return v.index(e)+1}).join(""))}function S(){b=[],g=void 0,h=void 0,s.removeClass("success error"),d.empty(),m.empty()}function j(e){(e=e||t.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function k(e){if(u[e.keyCode])return j(e),!1}function E(e){return function(t){if(t.preventDefault(),g===e){var n=function(e,t){var n=L(t),r=n.x,o=n.y;return y.x=r,y.y=o,y.matrixTransform(e.getScreenCTM().inverse())}(t.target,t);return e.setAttribute("x2",n.x),e.setAttribute("y2",n.y),!1}}}function C(e,t){if(!t){var n=L(e),r=n.x,o=n.y;t=document.elementFromPoint(r,o)}t.getAttribute("cx"),t.getAttribute("cy");(function(e){for(x=0;x<v.length;x++)if(v[x]===e)return!0;return!1})(t)&&!function(e){for(x=0;x<b.length;x++)if(b[x]===e)return!0;return!1}(t)&&(V(g,t),g=function(e){b.push(e);var t=e.getAttribute("cx"),n=e.getAttribute("cy"),r=D(t,n),o=_(t,n);m.append(o),h=E(r),s.on("touchmove mousemove",h),d.append(r),a.vibrate&&i();return r}(t))}function V(e,t){if(void 0!==e&&(h&&s.off("touchmove mousemove",h),void 0!==t)){var n=t.getAttribute("cx"),r=t.getAttribute("cy");e.setAttribute("x2",n),e.setAttribute("y2",r)}}function _(e,t){var n=document.createElementNS(r,"circle");return n.setAttribute("cx",e),n.setAttribute("cy",t),n.setAttribute("r",6),n}function D(e,t,n,o){var u=document.createElementNS(r,"line");return u.setAttribute("x1",e),u.setAttribute("y1",t),void 0===n||null==o?(u.setAttribute("x2",e),u.setAttribute("y2",t)):(u.setAttribute("x2",n),u.setAttribute("y2",o)),u}function L(e){return{x:e.clientX||e.originalEvent.touches[0].clientX,y:e.clientY||e.originalEvent.touches[0].clientY}}a=Object.assign(c.defaults,a||{}),s.on("touchstart mousedown",function(n){S(),n.preventDefault(),function(){t.addEventListener&&t.addEventListener("DOMMouseScroll",j,!1);t.onwheel=j,t.onmousewheel=document.onmousewheel=j,t.ontouchmove=j,document.onkeydown=k}(),s.on(o,C);var r="touchstart"==n.type?"touchend":"mouseup";e(document).one(r,function(e){!function(){(function(){t.removeEventListener&&t.removeEventListener("DOMMouseScroll",j,!1);t.onmousewheel=document.onmousewheel=null,t.onwheel=null,t.ontouchmove=null,document.onkeydown=null})(),V(g),g&&g.remove(),s.off(o,C);var e=a.onPattern.call(f,P());!0===e?A():!1===e&&w()}()})}),Object.assign(this,{clear:S,success:A,error:w,getPattern:P,setPattern:function(e){if(S(),void 0===e)return;var t,n,r,o=null;for(x=0;x<e.length;x++)void 0!==p[e[x]]&&(r=p[e[x]],t=_(r.x,r.y),m.append(t),null!=o&&(n=D(o.x,o.y,r.x,r.y),d.append(n)),a.vibrate&&i(),o=r)}})}return c.defaults={onPattern:function(){},vibrate:!0},c});